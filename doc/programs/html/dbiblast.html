<HTML>

<HEAD>
  <TITLE>
  EMBOSS: dbiblast
  </TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" text="#000000">



<table align=center border=0 cellspacing=0 cellpadding=0>
<tr><td valign=top>
<A HREF="index.html" ONMOUSEOVER="self.status='Go to the EMBOSS home page';return true"><img border=0 src="emboss_icon.jpg" alt="" width=150 height=48></a>
</td>
<td align=left valign=middle>
<b><font size="+6">

dbiblast
</font></b>
</td></tr>
</table>
<br>&nbsp;
<p>





<H2>
    Function
</H2>



<!--
DON'T WRITE ANYTHING HERE.
IT IS DONE FOR YOU.
-->
Index a BLAST database


<H2>
    Description
</H2>


<b>dbiblast</b> indexes a blast database created by the NCBI indexing programs
formatdb, pressdb or setdb, and builds EMBL CD-ROM format index
files. This format is used by the software on the EMBL database CD-ROM
distribution and by the Staden package in addition to EMBOSS, and
appears to be the most generally used and publicly available index
file format.

<p>

The index files of the blast database format are not useful by
themselves as they do not hold the entrynames or accession numbers,
but they are used as pointers to the reference and sequence information
in the database.

<p>

Because there are two sequence types (nucleic acid and protein) and two
index formats (blast1 from pressdb or setdb, and blast2 from formatdb)
with different index file names, <b>dbiblast</b> will ask about the database
type. If the answer is "unknown" <b>dbiblast</b> will test each possible set
of file names until one is found.

<p>

Having created the EMBOSS indices for this file, a database can then be
defined in the file <b>emboss.defaults</b> as something like:

<p>

<pre>
DB swnew [
   type: P
   format: embl
   method: blast
   directory: /data/embl
]  
</pre>



<H2>
    Usage
</H2>


<b>Here is a sample session with dbiblast</b>
<p>
This creates EMBOSS indices for the BLAST database 'swnew' 
<p>

<p>
<table width="90%"><tr><td bgcolor="#CCFFFF"><pre>

% <b>dbiblast </b>
Index a BLAST database
Database name: <b>swnew</b>
Database directory [.]: <b>../../data</b>
Wildcard database filename [swnew]: <b></b>
Release number [0.0]: <b></b>
Index date [00/00/00]: <b></b>
         N : nucleic
         P : protein
         ? : unknown
Sequence type [unknown]: <b></b>
         1 : wublast and setdb/pressdb
         2 : formatdb
         0 : unknown
Blast index version [unknown]: <b></b>

</pre></td></tr></table><p>
<p>
<a href="#output.1">Go to the output files for this example</a><p><p>


<!--
Here is a sample session with <b>dbiblast</b>, using a blast 2 protein database.

<pre>

% dbiblast
      NCBI : NCBI with | characters
       GCG : GCG format dbname:entryname
    SIMPLE : ID and accession
        ID : entryname
   UNKNOWN : unknown
Entry format [unknown]: gcg
Database name: swnew
Database directory [.]: /nfs/disk42/pmr/emboss/test/blastp2/
database base filename [swnew]: 
Release number [0.0]: 
Index date [00/00/00]: 04/02/00
         N : nucleic
         P : protein
         ? : unknown
Sequence type [unknown]: p
         1 : wublast and setdb/pressdb
         2 : formatdb
         0 : unknown
Blast index version [unknown]: 2

</pre>
-->


<H2>
    Command line arguments
</H2>



<!--
DON'T WRITE ANYTHING HERE.
IT IS DONE FOR YOU.
-->

<table CELLSPACING=0 CELLPADDING=3 BGCOLOR="#f5f5ff" ><tr><td>
<pre>
   Mandatory qualifiers:
  [-dbname]            string     Database name
   -directory          string     Database directory
   -filenames          string     Wildcard database filename
   -release            string     Release number
   -date               string     Index date
   -seqtype            menu       Sequence type
   -blastversion       menu       Blast index version

   Optional qualifiers: (none)
   Advanced qualifiers:
   -fields             menu       Index fields
   -exclude            string     wildcard filename(s) to exclude
   -indexdirectory     string     Index directory
   -sortoptions        string     Sort options, typically '-T .' to use
                                  current directory for work files and '-k
                                  1,1' to force GNU sort to use the first
                                  field
   -maxindex           integer    Maximum index length
   -[no]systemsort     boolean    Use system sort utility
   -[no]cleanup        boolean    Clean up temporary files
   -sourcefile         boolean    Use FASTA source file

   General qualifiers:
  -help                boolean    Report command line options. More
                                  information on associated and general
                                  qualifiers can be found with -help -verbose


</pre>
</td></tr></table>
<P>

<table border cellspacing=0 cellpadding=3 bgcolor="#f5f5ff">
<tr bgcolor="#FFFFD0">
<th align="left" colspan=2>Mandatory qualifiers</th>
<th align="left">Allowed values</th>
<th align="left">Default</th>
</tr>

<tr>
<td>[-dbname]<br>(Parameter 1)</td>
<td>Database name</td>
<td>A string from 1 to 19 characters</td>
<td><b>Required</b></td>
</tr>

<tr>
<td>-directory</td>
<td>Database directory</td>
<td>Any string is accepted</td>
<td>.</td>
</tr>

<tr>
<td>-filenames</td>
<td>Wildcard database filename</td>
<td>Any string is accepted</td>
<td>Database name</td>
</tr>

<tr>
<td>-release</td>
<td>Release number</td>
<td>A string up to 9 characters</td>
<td>0.0</td>
</tr>

<tr>
<td>-date</td>
<td>Index date</td>
<td>Date string dd/mm/yy</td>
<td>00/00/00</td>
</tr>

<tr>
<td>-seqtype</td>
<td>Sequence type</td>
<td><table><tr><td>N</td> <td><i>(nucleic)</i></td></tr><tr><td>P</td> <td><i>(protein)</i></td></tr><tr><td>?</td> <td><i>(unknown)</i></td></tr></table></td>
<td>unknown</td>
</tr>

<tr>
<td>-blastversion</td>
<td>Blast index version</td>
<td><table><tr><td>1</td> <td><i>(wublast and setdb/pressdb)</i></td></tr><tr><td>2</td> <td><i>(formatdb)</i></td></tr><tr><td>0</td> <td><i>(unknown)</i></td></tr></table></td>
<td>unknown</td>
</tr>

<tr bgcolor="#FFFFD0">
<th align="left" colspan=2>Optional qualifiers</th>
<th align="left">Allowed values</th>
<th align="left">Default</th>
</tr>

<tr>
<td colspan=4>(none)</td>
</tr>

<tr bgcolor="#FFFFD0">
<th align="left" colspan=2>Advanced qualifiers</th>
<th align="left">Allowed values</th>
<th align="left">Default</th>
</tr>

<tr>
<td>-fields</td>
<td>Index fields</td>
<td><table><tr><td>acnum</td> <td><i>(Accession number)</i></td></tr><tr><td>seqvn</td> <td><i>(Sequence Version and GI)</i></td></tr><tr><td>des</td> <td><i>(Description)</i></td></tr></table></td>
<td>acnum</td>
</tr>

<tr>
<td>-exclude</td>
<td>wildcard filename(s) to exclude</td>
<td>Any string is accepted</td>
<td><i>An empty string is accepted</i></td>
</tr>

<tr>
<td>-indexdirectory</td>
<td>Index directory</td>
<td>Any string is accepted</td>
<td>.</td>
</tr>

<tr>
<td>-sortoptions</td>
<td>Sort options, typically '-T .' to use current directory for work files and '-k 1,1' to force GNU sort to use the first field</td>
<td>Any string is accepted</td>
<td>-T . -k 1,1</td>
</tr>

<tr>
<td>-maxindex</td>
<td>Maximum index length</td>
<td>Integer 0 or more</td>
<td>0</td>
</tr>

<tr>
<td>-[no]systemsort</td>
<td>Use system sort utility</td>
<td>Boolean value Yes/No</td>
<td>Yes</td>
</tr>

<tr>
<td>-[no]cleanup</td>
<td>Clean up temporary files</td>
<td>Boolean value Yes/No</td>
<td>Yes</td>
</tr>

<tr>
<td>-sourcefile</td>
<td>Use FASTA source file</td>
<td>Boolean value Yes/No</td>
<td>No</td>
</tr>

</table>



<H2>
    Input file format
</H2>

AI BLAST1 or BLAST2 database index files.

<p>



<H2>
    Output file format
</H2>



<a name="output.1"></a>
<h3>Output files for usage example </h3>
<p><h3>File: acnum.hit</h3>
<p>This file contains non-printing characters and so cannot be displayed here.
<p><h3>File: acnum.trg</h3>
<p>This file contains non-printing characters and so cannot be displayed here.
<p><h3>File: division.lkp</h3>
<p>This file contains non-printing characters and so cannot be displayed here.
<p><h3>File: entrynam.idx</h3>
<p>This file contains non-printing characters and so cannot be displayed here.


<p>

<b>dbiblast</b> creates four index files.  All are binary but with a
simple format. 

<ul>

<li>division.lkp is the master index file, and has a 300 byte header
containing the database name and date plus information on the record
size. This header is followed by one record for each database file,
giving the full file name for the data file, and optionally a second
sequence file.

<p>

<li>entryname.idx is the entry name index. It has the same 300 byte
header, mainly used to store the record size which will depend on the
size of the longest entryname in the database. Each entry is stored in
sorted alphanumeric order so that a binary search can be used to
efficiently find any record. The record also holds the file number
from division.lkp and the offsets in the data and sequence files for
that entry.

<li>acnum.trg holds the accession number information. The file has the
usual 300 byte header, and a sorted list of record by accession number.
Each accession number record contains the first record number in acnum.hit
and the total number of records in acnum.hit so that secondary (duplicated)
accession numbers can be searched.

<li>acnum.hit is a very simple file. After the usual 300 byte header,
each record simply holds the record number in entryname.idx. An
accession number search will use acnum.trg to find a start position
and number of records to read in this file, and will then simply
read the entryname.idx records for each entry in turn.

</ul>

<H2>
    Data files
</H2>


None.

<H2>
    Notes
</H2>

None.


<H2>
    References
</H2>

None.


<H2>
    Warnings
</H2>

None.


<H2>
    Diagnostic Error Messages
</H2>

None.


<H2>
    Exit status
</H2>

None.


<H2>
    Known bugs
</H2>

None.


<!--
<H2>
    See also
</H2>
-->
<h2><a name="See also">See also</a></h2>
<table border cellpadding=4 bgcolor="#FFFFF0">
<tr><th>Program name</th><th>Description</th></tr>
<tr><td><a href="dbifasta.html">dbifasta</a></td><td>Index a fasta database</td></tr>
<tr><td><a href="dbiflat.html">dbiflat</a></td><td>Index a flat file database</td></tr>
<tr><td><a href="dbigcg.html">dbigcg</a></td><td>Index a GCG formatted database</td></tr>
</table>

<!--
        Add any comments about other associated programs (to prepare
        data files?) that seealso doesn't find.
   -->


<H2>
    Author(s)
</H2>


This application was written by Peter Rice <a
href="mailto:pmr@ebi.ac.uk">(pmr@ebi.ac.uk)</a> Informatics
Division, The EBI, Wellcome Trust Genome Campus, Hinxton,
Cambridge, CB10 1SA, UK.

<H2>
    History
</H2>


Completed December 1999

<!--
<p>
<table border cellspacing=0 cellpadding=3 bgcolor="#FFFFCC">
<tr><th>Date</th><th>Editor</th><th>Comment</th></tr>
<tr><td>2000/09/19</td><td>ajb</td><td>ACD file: First ever bioperl cvs for emboss</td></tr>
<tr><td>2000/09/19</td><td>ajb</td><td>ACD file: branches:  1.1.1;</td></tr>
<tr><td>2000/09/19</td><td>ajb</td><td>Program: First ever bioperl cvs for emboss</td></tr>
<tr><td>2000/09/19</td><td>ajb</td><td>Program: branches:  1.1.1;</td></tr>
<tr><td>2000/09/28</td><td>ajb</td><td>Program: Code cleanup</td></tr>
<tr><td>2000/10/14</td><td>ajb</td><td>ACD file: Senger format inconsistencies</td></tr>
<tr><td>2001/02/10</td><td>ajb</td><td>Program: ajint mods</td></tr>
<tr><td>2001/02/15</td><td>ajb</td><td>Program: main line alterations</td></tr>
<tr><td>2001/02/25</td><td>ajb</td><td>Program: AIX fcntl mod</td></tr>
<tr><td>2001/04/27</td><td>rice</td><td>Program: DBI functions to embdbi.c</td></tr>
<tr><td>2001/04/27</td><td>rice</td><td>Program: comment out stripncbi header for EFUNC</td></tr>
<tr><td>2001/05/10</td><td>gwilliam</td><td>ACD file: groups changed</td></tr>
<tr><td>2001/06/01</td><td>rice</td><td>Program: embDbiFileList fix</td></tr>
<tr><td>2001/06/04</td><td>rice</td><td>Program: @prog headers generated from acd files</td></tr>
<tr><td>2001/06/07</td><td>rice</td><td>Program: embDbiFileList extra AjBool trim for dbiblast and dbigcg</td></tr>
<tr><td>2001/06/25</td><td>ajb</td><td>Program: function rename</td></tr>
<tr><td>2001/07/11</td><td>rice</td><td>Program: (assumed) insignificant correction to ac index offset for first record</td></tr>
<tr><td>2001/07/12</td><td>ajb</td><td>Program: Memory leaks fixed</td></tr>
<tr><td>2001/10/29</td><td>ajb</td><td>ACD file: acdpretty version</td></tr>
<tr><td>2001/11/22</td><td>rice</td><td>Program: commented out debug msgs - too many for a large database indexing run</td></tr>
<tr><td>2002/02/12</td><td>rice</td><td>Program: remove commented out stripncbu function</td></tr>
<tr><td>2002/02/13</td><td>rice</td><td>ACD file: ACD section and endsection added by Thomas Laurent</td></tr>
<tr><td>2002/02/20</td><td>timc</td><td>ACD file: gui/batch/cpu</td></tr>
<tr><td>2002/02/25</td><td>rice</td><td>Program: remove whitespace from database name</td></tr>
<tr><td>2002/03/05</td><td>rice</td><td>Program: Make sure id is upper case ... accnum was already fixed for GCG but id was 'forgotten'</td></tr>
<tr><td>2002/03/05</td><td>rice</td><td>Program: One more accnum to upper case ... just in case</td></tr>
<tr><td>2002/03/05</td><td>rice</td><td>Program: Ooops. Fix accessions the right way</td></tr>
<tr><td>2002/03/21</td><td>rice</td><td>Program: ajSeqParseFasta and ajSeqParseNcbi return SeqVersion too</td></tr>
<tr><td>2002/03/27</td><td>hgmp</td><td>Program: Adding GI as another SeqVersion like Sv</td></tr>
<tr><td>2002/05/07</td><td>rice</td><td>ACD file: new index fields, maxindex length, no -staden</td></tr>
<tr><td>2002/05/07</td><td>rice</td><td>Program: DBI programs use embDbi functions, generate new indices des,seqvn,keyword,taxon. Index token lengths.</td></tr>
<tr><td>2002/05/12</td><td>ajb</td><td>Program: Uninitialised variable</td></tr>
<tr><td>2002/05/12</td><td>ajb</td><td>Program: suffix leak</td></tr>
<tr><td>2002/05/20</td><td>rice</td><td>ACD file: max 3 fields (only 3 defined anyway)</td></tr>
<tr><td>2002/05/27</td><td>rice</td><td>Program: Purify for &gt;1 database, clan up for wildcard filenaming</td></tr>
<tr><td>2002/08/06</td><td>rice</td><td>Program: function docs update</td></tr>
<tr><td>2002/08/22</td><td>rice</td><td>Program: cleanup spaces, long lines, and header comments</td></tr>
<tr><td>2002/08/28</td><td>rice</td><td>Program: duplicate IDs reduce size of entrynam file, and fatal for in-memory sort</td></tr>
<tr><td>2002/08/29</td><td>rice</td><td>Program: @datastatic definitions for typedef structs</td></tr>
</table>

-->

<H2>
    Target users
</H2>


This program is intended to be used by administrators responsible
for software and database installation and maintenance. 

<H2>
    Comments
</H2>


<pre>

</pre>


</BODY>
</HTML>

